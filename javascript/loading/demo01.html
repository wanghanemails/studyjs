<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8">
    <title>loading页面加载</title>
    <style type="text/css">
        html,body,ul{margin:0}
        ul{list-style:none;padding:0}
    </style>
    <script type="text/javascript">
        (function(window,undefined){
            function loading(){
                this.loadingHtml='<img src="data/attachment/album/201408/06/152327qdgf7z4spb4bkpkk.gif" id="loading" alt="加载中……" title="加载中……" style="position:absolute;z-index:10000;top:50%;left:50%;margin-left:-25px;margin-right:-25px;" /><div id="loadingwarp" style="position:fixed;width:100%;height:100%;z-index:9999;background:#3C3333;opacity:0.4;filter:alpha(opacity=40);left:0;top:0;"></div>';

                //执行函数
                this.completeLoading();
            }
            loading.prototype={
                constructor:loading,
                completeLoading:function(){
                    document.write(this.loadingHtml);
                    //判断节点是否存在
                    if(document.getElementById('loadingwarp') && document.getElementById('loading')){
                        var loadingwarp=document.getElementById('loadingwarp'),
                                loading=document.getElementById('loading');
                    }

                    //支持document.onreadystatechange
                    if(typeof document.onreadystatechange != "undefined"){
                        document.onreadystatechange=function(){
                            if(document.readyState=="complete"){
                                setTimeout(function(){
                                    loadingwarp.parentNode.removeChild(loadingwarp),
                                            loading.parentNode.removeChild(loading);
                                },200)
                            }
                        }
                    }else{
                        //不支持document.onreadystatechange
                        window.onload=function(){
                            setTimeout(function(){
                                loadingwarp.parentNode.removeChild(loadingwarp),
                                        loading.parentNode.removeChild(loading);
                            },200)
                        }
                    }
                }
            }

            //实例在里面
            /*var pageloading=function(){
             return new loading();
             }*/

            window.loading=loading;
        })(window)

        //pageloading()

        //实例在外面
        new loading();


    </script>
</head>
<body>
<ul>
    <li><img src="http://a.niupic.com/images/2014/08/04/53df5dd3c2860.jpg" alt="" /></li>
    <li><img src="http://a.niupic.com/images/2014/08/04/53df5dd59f9ef.jpg" alt="" /></li>
    <li><img src="http://a.niupic.com/images/2014/08/04/53df5e1347f6a.jpg" alt="" /></li>
</ul>

</body>
</html>